
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../oidc-models/" rel="prev"/>
<link href="../saml-idp-models/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.5.3, mkdocs-material-9.5.9" name="generator"/>
<title>IdP Settings - USP Core Authenticate documentation</title>
<link href="../assets/stylesheets/main.f2e4d321.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../assets/stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#saml-20-idp-settings">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="USP Core Authenticate documentation" class="md-header__button md-logo" data-md-component="logo" href=".." title="USP Core Authenticate documentation">
<img alt="logo" src="../assets/images/USP-Logo-2023-ohne-claim-lang-white1.webp"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            USP Core Authenticate documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              IdP Settings
            
          </span>
</div>
</div>
</div>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="USP Core Authenticate documentation" class="md-nav__button md-logo" data-md-component="logo" href=".." title="USP Core Authenticate documentation">
<img alt="logo" src="../assets/images/USP-Logo-2023-ohne-claim-lang-white1.webp"/>
</a>
    USP Core Authenticate documentation
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    Welcome
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Release Notes
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Release Notes
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../releasenotes/">
<span class="md-ellipsis">
    Secure Login Service
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Configuration
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../container/">
<span class="md-ellipsis">
    Container Internals
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-ellipsis">
    Settings
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            Settings
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2_1" id="__nav_3_2_1_label" tabindex="0">
<span class="md-ellipsis">
    General
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_2_1">
<span class="md-nav__icon md-icon"></span>
            General
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../authentication/">
<span class="md-ellipsis">
    Authentication
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../challenge_response/">
<span class="md-ellipsis">
    Challenge/Response
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../models/">
<span class="md-ellipsis">
    Models
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/">
<span class="md-ellipsis">
    Logging
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
<span class="md-ellipsis">
    OIDC OP
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_2_2">
<span class="md-nav__icon md-icon"></span>
            OIDC OP
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../oidc-settings/">
<span class="md-ellipsis">
    OIDC Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../oidc-models/">
<span class="md-ellipsis">
    Models
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
<span class="md-ellipsis">
    SAML 2.0 IdP
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_2_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_2_3">
<span class="md-nav__icon md-icon"></span>
            SAML 2.0 IdP
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    IdP Settings
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    IdP Settings
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#registering-a-service-provider">
<span class="md-ellipsis">
      Registering a Service Provider
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../saml-idp-models/">
<span class="md-ellipsis">
    Models
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-ellipsis">
    Kubernetes Manifests
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            Kubernetes Manifests
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../config_k8s_service/">
<span class="md-ellipsis">
    Service
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../config_k8s_deployment/">
<span class="md-ellipsis">
    Deployment
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../config_k8s_overrides/">
<span class="md-ellipsis">
    Overrides
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../config_k8s_files/">
<span class="md-ellipsis">
    Custom Files
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Operation
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Operation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../upgrade/">
<span class="md-ellipsis">
    Core Authenticate Upgrade
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    SLS Documentation
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            SLS Documentation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../html-documentation/">
<span class="md-ellipsis">
    HTML
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../pdf-documentation/">
<span class="md-ellipsis">
    PDF
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../downloads/">
<span class="md-ellipsis">
    Downloads
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#registering-a-service-provider">
<span class="md-ellipsis">
      Registering a Service Provider
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="saml-20-idp-settings">SAML 2.0 IdP Settings</h1>
<p>The following SAML IdP configuration properties are pre-configured in the "Core Authenticate" container:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#############saml.securityConfiguration.signatureReferenceDigestMethod=http://www.w3.org/2001/04/xmlenc#sha512</span>

<span class="c1"># IdP EntityID,</span>
<span class="na">idp.entity.id</span><span class="o">=</span><span class="s">https://${header.host}/idp/sls</span>
<span class="c1">#idp.entity.id=https://sestest2.seslab.local/idp/sls</span>

<span class="c1"># IdP Keystore.</span>
<span class="na">idp.keystore.file</span><span class="o">=</span><span class="s">WEB-INF/sls.jks</span>
<span class="na">idp.keystore.type</span><span class="o">=</span><span class="s">JKS</span>
<span class="na">idp.keystore.pass</span><span class="o">=</span><span class="s">changeit</span>
<span class="c1"># or store keystore password in a file and reference the file as follows:</span>
<span class="c1">#idp.keystore.pass=${function.getValueFromFile('/path/to/file')}</span>
<span class="c1"># Alias of IdP key pair in keystore.</span>
<span class="na">idp.keystore.keypair.alias</span><span class="o">=</span><span class="s">idp</span>

<span class="c1"># SSO/SLO: URL for each binding.</span>
<span class="c1"># Currently only redirect binding is supported</span>
<span class="na">idp.sso.redirect.url</span><span class="o">=</span><span class="s">https://${header.host}/ite/idp/sls/auth</span>
<span class="na">idp.slo.redirect.url</span><span class="o">=</span><span class="s">https://${header.host}/ite/idp/sls/slo</span>

<span class="c1">#idp.redirectWithMetaRefresh=slo</span>

<span class="c1"># Optional: Offset in seconds to subtract from the issue instant in</span>
<span class="c1"># assertions and saml responses. Use as workaround for problems with</span>
<span class="c1"># clock sync on IdP and SP. Note however, that some SPs will conversely</span>
<span class="c1"># not accept Assertions that have nominally been issued before the</span>
<span class="c1"># Request was created/sent.</span>
<span class="c1"># Default: 0.</span>
<span class="c1">#idp.issueinstant.offset.secs=60</span>

<span class="c1"># Validity period of assertion and conditions in assertion</span>
<span class="c1"># (issue instant offset is added to that).</span>
<span class="c1"># Default: 600 sec (10 min).</span>
<span class="na">idp.assertion.validity.secs</span><span class="o">=</span><span class="s">600</span>

<span class="c1"># Authentication method in the assertion.</span>
<span class="na">idp.assertion.authentication.method</span><span class="o">=</span><span class="s">urn:oasis:names:tc:SAML:2.0:ac:classes:Password</span>

<span class="c1"># Supported NameIDs.</span>
<span class="c1"># If there is no NameIDPolicy in the request, the first one indicated is used.</span>
<span class="c1"># Otherwise, the first match of format+allowcreate with the NameIDPolicy is used.</span>
<span class="na">idp.assertion.nameid.1.format</span><span class="o">=</span><span class="s">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</span>
<span class="na">idp.assertion.nameid.1.allowcreate</span><span class="o">=</span><span class="s">true</span>
<span class="c1"># idp.assertion.nameid.1.value=${idp.createRandomId()}</span>
<span class="na">idp.assertion.nameid.1.value</span><span class="o">=</span><span class="s">saml-user_${session.getCred('username')}</span>
<span class="c1"># Note that beyond simple use cases, it may be more convenient to use</span>
<span class="c1"># JEXL functions idp.setAssertionAttribute[...]() to set attributes.</span>
<span class="c1"># The name format to use, 'basic' and 'uri' are supported.</span>
<span class="c1"># (This setting has the same effect as the deprecated idp.assertion.attr.&lt;no&gt;.type).</span>
<span class="na">idp.assertion.attr.1.nameformat</span><span class="o">=</span><span class="s">basic</span>
<span class="c1"># (Long) name of the attribute.</span>
<span class="na">idp.assertion.attr.1.name</span><span class="o">=</span><span class="s">urn:oid:0.9.2342.19200300.100.1.1</span>
<span class="c1"># Friendly name of the attribute.</span>
<span class="na">idp.assertion.attr.1.friendlyname</span><span class="o">=</span><span class="s">uid</span>
<span class="c1"># Use this setting for a single string value, typically a JEXL expression.</span>
<span class="na">idp.assertion.attr.1.value</span><span class="o">=</span><span class="s">${session.getCred('USERNAME')}</span>
<span class="c1"># Alternatively provide the name of a JEXL variable that may contain</span>
<span class="c1"># either a single string value or a string array.</span>
<span class="c1"># Note that the variable name must be indicated as a constant,</span>
<span class="c1"># e.g. "var", not as a JEXL expression, e.g. "${var}.</span>
<span class="c1"># idp.assertion.attr.1.value.variable=attribute.ldap.ismemberof</span>
<span class="c1"># Optional setting that defines the value type to use:</span>
<span class="c1"># - string (default)</span>
<span class="c1"># - base64: given value(s) are first UTF-8 encoded and then base64 encoded</span>
<span class="c1"># - base64.provided: given value(s) are taken as is, indicated that is base64 in attribute</span>
<span class="c1">#idp.assertion.attr.1.value.type=string</span>
<span class="c1"># Optional setting that enforces a profile:</span>
<span class="c1"># - basic: Basic profile, see saml-profiles-2.0-os, section 8.1.</span>
<span class="c1"># - x500ldap: X500/LDAP profile, saml-profiles-2.0-os, section 8.2.</span>
<span class="c1">#idp.assertion.attr.1.profile=x500ldap</span>

<span class="na">idp.assertion.attr.2.nameformat</span><span class="o">=</span><span class="s">uri</span>
<span class="na">idp.assertion.attr.2.name</span><span class="o">=</span><span class="s">urn:oid:1.3.6.1.4.1.1466.115.121.1.12</span>
<span class="na">idp.assertion.attr.2.friendlyname</span><span class="o">=</span><span class="s">dn</span>
<span class="na">idp.assertion.attr.2.value.variable</span><span class="o">=</span><span class="s">queryResultArrayFromSsoAttr</span>
<span class="na">idp.assertion.attr.2.value.type</span><span class="o">=</span><span class="s">base64</span>
<span class="na">idp.assertion.attr.2.profile</span><span class="o">=</span><span class="s">x500ldap</span>

<span class="c1"># SSO Attributes, stored after successful login at IdP.</span>
<span class="c1"># Use JEXL ${idp.getSsoAttribute(&lt;key&gt;)} to retrieve.</span>
<span class="na">idp.sso.attr.1.key</span><span class="o">=</span><span class="s">multi</span>
<span class="c1"># Either set a single string variable explicitly...</span>
<span class="c1">#idp.sso.attr.1.value=${session.getCred('USERNAME')}</span>
<span class="c1"># ... or indicate the name of a variable that can contain</span>
<span class="c1"># a single string value or an array of strings.</span>
<span class="c1"># Note that the variable name must be indicated as a constant,</span>
<span class="c1"># e.g. "var", not as a JEXL expression, e.g. "${var}.</span>
<span class="na">idp.sso.attr.1.value.variable</span><span class="o">=</span><span class="s">queryResultArrayForSsoAttr</span>
</code></pre></div>
<p>For details on SAML configuration, please see <a href="../files/5.19.0.4/html-admin-guide/sls-adminguide.html#x10007_Heading1Tarsec_SAML_IdP_Adapter">SLS Administration Guide</a></p>
<h2 id="registering-a-service-provider">Registering a Service Provider</h2>
<p>In order to actually use the SAML IdP, registering a Service Provider will be the minimal required action. This can
be done through the properties overrides (see <a href="../config_k8s_overrides/">Kubernetes overrides</a> for details) by setting a few custom configuration
properties. Example:</p>
<p><div class="highlight"><pre><span></span><code><span class="na">idp.sp.1.alias</span><span class="o">=</span><span class="s">acme-ltd-sp</span>
<span class="na">idp.sp.1.metadata.provider</span><span class="o">=</span><span class="s">file</span>
<span class="na">idp.sp.1.metadata.location</span><span class="o">=</span><span class="s">WEB-INF/idp/acmesp-metadata.xml</span>
<span class="na">idp.sp.1.message.sign</span><span class="o">=</span><span class="s">sso.post,slo.redirect</span>
<span class="na">idp.sp.1.message.checksign</span><span class="o">=</span><span class="s">true</span>
<span class="na">idp.sp.1.sso</span><span class="o">=</span><span class="s">false</span>
<span class="na">idp.sp.1.url</span><span class="o">=</span><span class="s">https://www.acme-ltd.com/sp</span>
<span class="na">idp.sp.1.keystore.keypair.alias</span><span class="o">=</span><span class="s">myidp</span>
</code></pre></div>
This registers an SP with an alias "acme-ltd-sp" (can be using in various scripting functions etc.). However, this will
also require to upload the SP SAML metadata file "acmesp-metadata.xml" to the SLS subdirectory "WEB-INF/idp/":</p>
<ul>
<li><code>/usr/share/usp/sls/webapps/sls/WEB-INF/idp/acmesp-metadata.xml</code></li>
</ul>
<p>In certain deployment scenarios ("docker-compose" for example) you may be able to just mount this file directly into that
path in the SLS. In others, like Kubernetes, you may need to use an approach where you mount this file into a temporary 
folder and then copy it to the target directory at startup time, by adapting the container startup command. See 
<a href="../config_k8s_files/">"Adding custom files"</a> for details.</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.8fd75fb4.min.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>